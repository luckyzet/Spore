package com.luckyzz.sporegame.util.invulnerability;

import com.akamecoder.cristalix.util.AkameOptional;
import com.akamecoder.cristalix.util.player.PlayerFilters;
import org.bukkit.entity.Player;
import org.jetbrains.annotations.NotNull;

import java.util.function.Consumer;

public interface Invulnerability {

    long getTimeLeft();

    /**
     * @return false if time has over or true if time has not over
     */
    boolean doTimeChecking();

    @NotNull String getName();

    default @NotNull Player getPlayer() {
        return getPlayerOptional().get();
    }

    default @NotNull AkameOptional<Player> getPlayerOptional() {
        return PlayerFilters.getPlayer(getName());
    }

    /**
     * @return true if option present and false if not
     */
    boolean checkOption(@NotNull final InvulnerabilityOption option);

    @NotNull Invulnerability expire(@NotNull final Consumer<Player> userConsumer);

    @NotNull Invulnerability option(@NotNull final InvulnerabilityOption option);

    void cancel();

    void apply();

    void unapply();

}
